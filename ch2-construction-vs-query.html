<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js navy">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Construction vs Query - broccoli_report</title>


        <!-- Custom HTML head -->
        
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "navy";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('navy')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="overview.html"><strong aria-hidden="true">1.</strong> Overview</a></li><li class="chapter-item expanded "><a href="ch0-analysis-method.html"><strong aria-hidden="true">2.</strong> Analysis Method</a></li><li class="chapter-item expanded "><a href="ch1-broccoli-vs-other.html"><strong aria-hidden="true">3.</strong> Comparison to other Algs</a></li><li class="chapter-item expanded "><a href="ch2-construction-vs-query.html" class="active"><strong aria-hidden="true">4.</strong> Construction vs Query</a></li><li class="chapter-item expanded "><a href="ch3-level-analysis.html"><strong aria-hidden="true">5.</strong> Tree Level Load</a></li><li class="chapter-item expanded "><a href="ch4-aabb-data-layout.html"><strong aria-hidden="true">6.</strong> AABB Data Layout</a></li><li class="chapter-item expanded "><a href="ch5-tree-data-layout.html"><strong aria-hidden="true">7.</strong> Tree Data Layout</a></li><li class="chapter-item expanded "><a href="ch6-choosing-optimal-height.html"><strong aria-hidden="true">8.</strong> Optimal Tree Height</a></li><li class="chapter-item expanded "><a href="ch7-parallelism.html"><strong aria-hidden="true">9.</strong> Parallelism</a></li><li class="chapter-item expanded "><a href="ch8-primitive-types.html"><strong aria-hidden="true">10.</strong> Primitive Types</a></li><li class="chapter-item expanded "><a href="ch9-api-design.html"><strong aria-hidden="true">11.</strong> API Design</a></li><li class="chapter-item expanded "><a href="ch10-algorithm-in-depth.html"><strong aria-hidden="true">12.</strong> Algorithm In-Depth</a></li><li class="chapter-item expanded "><a href="ch11-improvements.html"><strong aria-hidden="true">13.</strong> Improvements</a></li><li class="chapter-item expanded "><a href="ch12-how-to-make-aabb.html"><strong aria-hidden="true">14.</strong> How to make Aabb</a></li><li class="chapter-item expanded "><a href="ch13-code-layout.html"><strong aria-hidden="true">15.</strong> Code Layout</a></li><li class="chapter-item expanded "><a href="ch14-general-thoughts.html"><strong aria-hidden="true">16.</strong> General Thoughts</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">broccoli_report</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h3 id="rebalancing-vs-querying"><a class="header" href="#rebalancing-vs-querying">Rebalancing vs Querying</a></h3>
<p>The below charts show the load balance between the construction and querying through calling
<code>find_colliding_pairs</code> on the broccoli.
It's important to note that the comparison isn't really 'fair'. The cost of querying depends a lot on
what you plan on doing with every colliding pair (it could be an expensive user calculation). Here we just use a 'reasonably' expensive calculation that repels the colliding pairs.</p>
<pre><code>//Called on each colliding pair.
fn repel(p1: Vec2&lt;f32&gt;, p2: Vec2&lt;f32&gt;, res1: &amp;mut Vec2&lt;f32&gt;, res2: &amp;mut Vec2&lt;f32&gt;) {
    let offset = p2 - p1;
    let dis = (offset).magnitude2();
    if dis &lt; RADIUS * RADIUS {
        *res1 += offset * 0.0001;
        *res2 -= offset * 0.0001;
    }
}
</code></pre>
<p>Some observations:</p>
<ul>
<li>The cost of rebalancing does not change with the density of the objects</li>
<li>If the aabbs are spread out enough, the cost of querying decreases enough to be about the same as rebalancing.</li>
<li>The cost of querying is reduced more by parallelizing than the cost of rebalancing.</li>
</ul>
<p>It makes sense that querying in more 'parallelizable' than rebalancing since the calculation that you have to perform for each node before you can divide and conquer the problem is more expensive for rebalancing. For rebalancing you need to find the median and bin the aabbs. For querying you only have to do sweep and prune. 
So more work has to be done upfront on a node before we can recurse.</p>
<link rel="stylesheet" href="css/poloto.css">
<svg class="poloto" width="800" height="500" viewBox="0 0 800 500" xmlns="http://www.w3.org/2000/svg"><circle  r="1e5" class="poloto_background" /><text  class="poloto_text poloto_legend_text" x="675" y="100" >contr</text><line  class="poloto_line poloto_legend_icon poloto0stroke poloto0legend" stroke="black" x1="680" x2="730" y1="81.25" y2="81.25" /><path  class="poloto_line poloto0stroke" fill="none" stroke="black" d=" M 150.00 396.87 L 155.05 395.63 L 160.10 393.78 L 165.15 386.30 L 170.20 382.66 L 175.25 376.52 L 180.30 377.22 L 185.35 372.16 L 190.40 375.98 L 195.45 377.70 L 200.51 383.35 L 205.56 376.06 L 210.61 380.16 L 215.66 378.56 L 220.71 375.27 L 225.76 374.52 L 230.81 372.99 L 235.86 371.47 L 240.91 370.00 L 245.96 367.95 L 251.01 356.55 L 256.06 358.77 L 261.11 358.16 L 266.16 352.55 L 271.21 353.87 L 276.26 353.45 L 281.31 351.97 L 286.36 348.77 L 291.41 342.27 L 296.46 348.43 L 301.52 343.91 L 306.57 342.26 L 311.62 322.62 L 316.67 339.64 L 321.72 334.70 L 326.77 333.78 L 331.82 334.96 L 336.87 329.20 L 341.92 329.21 L 346.97 325.61 L 352.02 325.79 L 357.07 313.10 L 362.12 315.28 L 367.17 294.58 L 372.22 310.03 L 377.27 275.59 L 382.32 306.45 L 387.37 294.21 L 392.42 304.41 L 397.47 271.38 L 402.53 301.69 L 407.58 285.60 L 412.63 295.23 L 417.68 290.91 L 422.73 291.88 L 427.78 288.90 L 432.83 254.78 L 437.88 276.74 L 442.93 281.52 L 447.98 280.38 L 453.03 277.55 L 458.08 274.36 L 463.13 271.68 L 468.18 268.97 L 473.23 268.86 L 478.28 270.24 L 483.33 264.27 L 488.38 264.24 L 493.43 255.64 L 498.48 257.16 L 503.54 259.46 L 508.59 250.67 L 513.64 238.28 L 518.69 248.20 L 523.74 246.54 L 528.79 246.07 L 533.84 242.25 L 538.89 246.58 L 543.94 237.24 L 548.99 238.65 L 554.04 237.42 L 559.09 234.51 L 564.14 216.60 L 569.19 217.98 L 574.24 216.07 L 579.29 217.55 L 584.34 215.27 L 589.39 208.82 L 594.44 198.76 L 599.49 200.36 L 604.55 203.16 L 609.60 199.16 L 614.65 192.83 L 619.70 192.95 L 624.75 189.10 L 629.80 187.69 L 634.85 188.99 L 639.90 190.00 L 644.95 187.67 L 650.00 182.62" /><text  class="poloto_text poloto_legend_text" x="675" y="150" >ns_contr</text><line  class="poloto_line poloto_legend_icon poloto1stroke poloto1legend" stroke="black" x1="680" x2="730" y1="131.25" y2="131.25" /><path  class="poloto_line poloto1stroke" fill="none" stroke="black" d=" M 150.00 399.86 L 155.05 398.66 L 160.10 396.05 L 165.15 390.41 L 170.20 386.94 L 175.25 388.22 L 180.30 382.87 L 185.35 383.04 L 190.40 385.33 L 195.45 389.15 L 200.51 386.43 L 205.56 384.06 L 210.61 384.06 L 215.66 383.57 L 220.71 382.01 L 225.76 380.48 L 230.81 380.21 L 235.86 368.74 L 240.91 377.16 L 245.96 376.75 L 251.01 373.27 L 256.06 368.46 L 261.11 359.29 L 266.16 362.99 L 271.21 363.23 L 276.26 364.47 L 281.31 362.61 L 286.36 360.10 L 291.41 359.23 L 296.46 359.77 L 301.52 348.97 L 306.57 354.12 L 311.62 354.16 L 316.67 352.99 L 321.72 347.66 L 326.77 348.78 L 331.82 348.01 L 336.87 345.87 L 341.92 345.74 L 346.97 331.87 L 352.02 342.39" /><text  class="poloto_text poloto_legend_text" x="675" y="200" >ns_par_contr</text><line  class="poloto_line poloto_legend_icon poloto2stroke poloto2legend" stroke="black" x1="680" x2="730" y1="181.25" y2="181.25" /><path  class="poloto_line poloto2stroke" fill="none" stroke="black" d=" M 150.00 399.87 L 155.05 398.73 L 160.10 395.35 L 165.15 392.53 L 170.20 388.44 L 175.25 387.96 L 180.30 383.06 L 185.35 382.94 L 190.40 385.53 L 195.45 388.18 L 200.51 389.03 L 205.56 385.68 L 210.61 384.71 L 215.66 382.08 L 220.71 379.29 L 225.76 381.28 L 230.81 376.64 L 235.86 380.84 L 240.91 372.37 L 245.96 369.81 L 251.01 369.59 L 256.06 372.20 L 261.11 364.11 L 266.16 360.89 L 271.21 355.89 L 276.26 376.21 L 281.31 221.70 L 286.36 377.89 L 291.41 367.07 L 296.46 368.71 L 301.52 361.96 L 306.57 365.89 L 311.62 365.55 L 316.67 333.52 L 321.72 366.41 L 326.77 366.11 L 331.82 365.80 L 336.87 365.84 L 341.92 358.69 L 346.97 364.60 L 352.02 359.68 L 357.07 365.25 L 362.12 360.50 L 367.17 361.56 L 372.22 364.18 L 377.27 357.72 L 382.32 357.94 L 387.37 359.33 L 392.42 346.60 L 397.47 353.50 L 402.53 354.78 L 407.58 349.11 L 412.63 339.77 L 417.68 349.61 L 422.73 348.69 L 427.78 349.07 L 432.83 346.46 L 437.88 342.15 L 442.93 345.84 L 447.98 347.66 L 453.03 349.10 L 458.08 343.62 L 463.13 340.75 L 468.18 345.26 L 473.23 344.59 L 478.28 341.86 L 483.33 337.51 L 488.38 338.96 L 493.43 344.84 L 498.48 340.28 L 503.54 337.72 L 508.59 335.34 L 513.64 337.40 L 518.69 335.41 L 523.74 327.31 L 528.79 335.29" /><text  class="poloto_text poloto_legend_text" x="675" y="250" >ns_par_query</text><line  class="poloto_line poloto_legend_icon poloto3stroke poloto3legend" stroke="black" x1="680" x2="730" y1="231.25" y2="231.25" /><path  class="poloto_line poloto3stroke" fill="none" stroke="black" d=" M 150.00 399.95 L 155.05 388.74 L 160.10 369.00 L 165.15 361.02 L 170.20 333.97 L 175.25 318.78 L 180.30 315.15 L 185.35 310.18 L 190.40 323.13 L 195.45 337.61 L 200.51 335.22 L 205.56 349.36 L 210.61 343.99 L 215.66 340.49 L 220.71 343.25 L 225.76 324.89 L 230.81 327.12 L 235.86 329.74 L 240.91 312.34 L 245.96 309.23 L 251.01 299.34 L 256.06 244.12 L 261.11 287.56 L 266.16 299.68 L 271.21 299.71 L 276.26 326.07 L 281.31 314.94 L 286.36 310.82 L 291.41 308.26 L 296.46 309.00 L 301.52 291.59 L 306.57 290.13 L 311.62 293.76 L 316.67 209.39 L 321.72 286.42 L 326.77 281.88 L 331.82 270.59 L 336.87 266.52 L 341.92 188.99 L 346.97 273.74 L 352.02 248.16 L 357.07 282.94 L 362.12 280.05 L 367.17 275.77 L 372.22 261.84 L 377.27 263.64 L 382.32 258.61 L 387.37 257.78 L 392.42 237.47 L 397.47 245.06 L 402.53 232.62 L 407.58 231.48 L 412.63 209.43 L 417.68 224.08 L 422.73 217.25 L 427.78 211.09 L 432.83 210.43 L 437.88 214.98 L 442.93 214.59 L 447.98 198.73 L 453.03 179.39 L 458.08 191.00 L 463.13 199.61 L 468.18 177.09 L 473.23 177.21 L 478.28 183.66 L 483.33 141.72 L 488.38 165.98 L 493.43 165.18 L 498.48 168.08 L 503.54 128.95 L 508.59 151.13 L 513.64 151.70 L 518.69 136.22 L 523.74 134.68 L 528.79 127.39" /><text  class="poloto_text poloto_legend_text" x="675" y="300" >ns_query</text><line  class="poloto_line poloto_legend_icon poloto4stroke poloto4legend" stroke="black" x1="680" x2="730" y1="281.25" y2="281.25" /><path  class="poloto_line poloto4stroke" fill="none" stroke="black" d=" M 150.00 399.93 L 155.05 385.21 L 160.10 367.74 L 165.15 359.26 L 170.20 327.13 L 175.25 311.49 L 180.30 311.66 L 185.35 308.76 L 190.40 322.40 L 195.45 337.63 L 200.51 320.68 L 205.56 337.29 L 210.61 332.39 L 215.66 322.75 L 220.71 316.99 L 225.76 306.95 L 230.81 292.33 L 235.86 265.91 L 240.91 280.25 L 245.96 267.51 L 251.01 258.70 L 256.06 278.90 L 261.11 263.75 L 266.16 262.10 L 271.21 232.72 L 276.26 243.08 L 281.31 230.58 L 286.36 232.10 L 291.41 210.27 L 296.46 208.87 L 301.52 204.33 L 306.57 191.58 L 311.62 184.38 L 316.67 157.37 L 321.72 172.18 L 326.77 158.47 L 331.82 128.35 L 336.87 131.23 L 341.92 125.32 L 346.97 100.00 L 352.02 110.45" /><text  class="poloto_text poloto_legend_text" x="675" y="350" >par_contr</text><line  class="poloto_line poloto_legend_icon poloto5stroke poloto5legend" stroke="black" x1="680" x2="730" y1="331.25" y2="331.25" /><path  class="poloto_line poloto5stroke" fill="none" stroke="black" d=" M 150.00 399.81 L 155.05 397.72 L 160.10 393.46 L 165.15 388.56 L 170.20 384.71 L 175.25 370.55 L 180.30 375.70 L 185.35 377.54 L 190.40 380.41 L 195.45 377.14 L 200.51 382.66 L 205.56 376.61 L 210.61 381.82 L 215.66 379.93 L 220.71 378.75 L 225.76 332.02 L 230.81 375.81 L 235.86 372.37 L 240.91 376.23 L 245.96 364.30 L 251.01 362.40 L 256.06 364.15 L 261.11 358.41 L 266.16 343.31 L 271.21 357.40 L 276.26 371.64 L 281.31 374.56 L 286.36 370.15 L 291.41 358.65 L 296.46 363.29 L 301.52 344.08 L 306.57 358.55 L 311.62 358.80 L 316.67 365.18 L 321.72 365.50 L 326.77 364.03 L 331.82 360.39 L 336.87 357.62 L 341.92 329.01 L 346.97 355.83 L 352.02 364.03 L 357.07 350.58 L 362.12 353.90 L 367.17 353.93 L 372.22 353.91 L 377.27 348.93 L 382.32 350.00 L 387.37 343.69 L 392.42 330.41 L 397.47 345.23 L 402.53 347.41 L 407.58 325.77 L 412.63 344.30 L 417.68 344.56 L 422.73 332.40 L 427.78 337.78 L 432.83 329.90 L 437.88 333.72 L 442.93 339.13 L 447.98 341.11 L 453.03 335.39 L 458.08 334.95 L 463.13 323.25 L 468.18 336.02 L 473.23 329.22 L 478.28 324.51 L 483.33 333.47 L 488.38 320.49 L 493.43 329.57 L 498.48 310.45 L 503.54 327.43 L 508.59 320.05 L 513.64 327.57 L 518.69 318.23 L 523.74 319.77 L 528.79 322.12 L 533.84 324.22 L 538.89 328.38 L 543.94 319.85 L 548.99 317.67 L 554.04 316.10 L 559.09 306.66 L 564.14 312.48 L 569.19 317.12 L 574.24 310.07 L 579.29 314.86 L 584.34 313.67 L 589.39 312.84 L 594.44 297.40 L 599.49 314.38 L 604.55 304.99 L 609.60 307.15 L 614.65 295.98 L 619.70 303.92 L 624.75 303.23 L 629.80 298.76 L 634.85 295.26 L 639.90 294.39 L 644.95 302.88 L 650.00 290.32" /><text  class="poloto_text poloto_legend_text" x="675" y="400" >par_query</text><line  class="poloto_line poloto_legend_icon poloto6stroke poloto6legend" stroke="black" x1="680" x2="730" y1="381.25" y2="381.25" /><path  class="poloto_line poloto6stroke" fill="none" stroke="black" d=" M 150.00 399.90 L 155.05 394.79 L 160.10 386.32 L 165.15 371.97 L 170.20 368.49 L 175.25 361.00 L 180.30 357.35 L 185.35 359.35 L 190.40 366.77 L 195.45 368.20 L 200.51 368.95 L 205.56 370.98 L 210.61 372.99 L 215.66 371.36 L 220.71 369.30 L 225.76 369.28 L 230.81 364.65 L 235.86 364.80 L 240.91 357.75 L 245.96 355.51 L 251.01 342.78 L 256.06 342.38 L 261.11 347.40 L 266.16 345.09 L 271.21 339.55 L 276.26 365.56 L 281.31 369.01 L 286.36 366.91 L 291.41 345.52 L 296.46 361.49 L 301.52 355.04 L 306.57 357.30 L 311.62 357.35 L 316.67 358.23 L 321.72 359.33 L 326.77 332.64 L 331.82 351.83 L 336.87 351.58 L 341.92 351.22 L 346.97 350.25 L 352.02 351.41 L 357.07 352.99 L 362.12 348.47 L 367.17 351.28 L 372.22 350.08 L 377.27 337.21 L 382.32 340.14 L 387.37 338.64 L 392.42 325.37 L 397.47 343.43 L 402.53 342.63 L 407.58 317.93 L 412.63 324.05 L 417.68 334.61 L 422.73 331.19 L 427.78 336.31 L 432.83 335.43 L 437.88 332.77 L 442.93 330.28 L 447.98 334.66 L 453.03 332.70 L 458.08 331.30 L 463.13 328.24 L 468.18 328.40 L 473.23 331.15 L 478.28 327.98 L 483.33 326.29 L 488.38 316.93 L 493.43 322.45 L 498.48 311.55 L 503.54 321.46 L 508.59 318.87 L 513.64 319.77 L 518.69 312.07 L 523.74 316.23 L 528.79 316.40 L 533.84 317.58 L 538.89 303.04 L 543.94 312.14 L 548.99 304.08 L 554.04 311.32 L 559.09 300.32 L 564.14 308.89 L 569.19 304.32 L 574.24 306.15 L 579.29 304.03 L 584.34 301.76 L 589.39 301.27 L 594.44 283.69 L 599.49 301.96 L 604.55 295.86 L 609.60 301.76 L 614.65 298.47 L 619.70 284.57 L 624.75 293.33 L 629.80 291.51 L 634.85 291.94 L 639.90 291.79 L 644.95 288.11 L 650.00 280.95" /><text  class="poloto_text poloto_legend_text" x="675" y="450" >query</text><line  class="poloto_line poloto_legend_icon poloto7stroke poloto7legend" stroke="black" x1="680" x2="730" y1="431.25" y2="431.25" /><path  class="poloto_line poloto7stroke" fill="none" stroke="black" d=" M 150.00 399.83 L 155.05 392.80 L 160.10 385.57 L 165.15 377.11 L 170.20 362.22 L 175.25 352.97 L 180.30 353.80 L 185.35 351.63 L 190.40 366.07 L 195.45 358.87 L 200.51 367.09 L 205.56 367.97 L 210.61 368.75 L 215.66 364.08 L 220.71 359.78 L 225.76 356.76 L 230.81 356.22 L 235.86 355.28 L 240.91 348.50 L 245.96 348.45 L 251.01 336.09 L 256.06 335.08 L 261.11 339.11 L 266.16 332.98 L 271.21 331.79 L 276.26 328.23 L 281.31 331.26 L 286.36 329.56 L 291.41 314.04 L 296.46 316.56 L 301.52 321.17 L 306.57 299.60 L 311.62 290.71 L 316.67 308.04 L 321.72 302.30 L 326.77 300.72 L 331.82 297.32 L 336.87 292.68 L 341.92 290.12 L 346.97 290.30 L 352.02 286.16 L 357.07 275.54 L 362.12 286.73 L 367.17 280.95 L 372.22 280.85 L 377.27 256.29 L 382.32 275.35 L 387.37 251.34 L 392.42 265.08 L 397.47 259.48 L 402.53 262.94 L 407.58 258.85 L 412.63 259.10 L 417.68 243.57 L 422.73 232.62 L 427.78 255.95 L 432.83 243.56 L 437.88 246.30 L 442.93 238.94 L 447.98 229.70 L 453.03 231.76 L 458.08 230.13 L 463.13 220.53 L 468.18 207.89 L 473.23 231.73 L 478.28 214.88 L 483.33 215.82 L 488.38 217.92 L 493.43 201.34 L 498.48 211.57 L 503.54 199.53 L 508.59 205.81 L 513.64 180.94 L 518.69 195.59 L 523.74 194.16 L 528.79 184.98 L 533.84 193.38 L 538.89 190.60 L 543.94 186.73 L 548.99 189.55 L 554.04 181.08 L 559.09 165.48 L 564.14 186.04 L 569.19 181.66 L 574.24 154.91 L 579.29 152.02 L 584.34 158.21 L 589.39 151.19 L 594.44 144.06 L 599.49 166.45 L 604.55 143.96 L 609.60 137.83 L 614.65 139.86 L 619.70 154.89 L 624.75 144.44 L 629.80 123.44 L 634.85 113.28 L 639.90 116.25 L 644.95 118.06 L 650.00 105.08" /><text  class="poloto_labels poloto_text poloto_title" x="400" y="37.5" >Bench of construction vs query abspiral(x,1.5)</text><text  class="poloto_labels poloto_text poloto_xname" x="400" y="481.25" >Number of Elements</text><text  class="poloto_labels poloto_text poloto_yname" transform="rotate(-90,37.5,250)" x="37.5" y="250" >Time in Seconds</text><text  class="poloto_tick_labels poloto_text" dominant-baseline="middle" text-anchor="start" x="440.00000000000006" y="70" ></text><line  class="poloto_axis_lines" stroke="black" x1="150" x2="150" y1="400" y2="405" /><text  class="poloto_tick_labels poloto_text" dominant-baseline="start" text-anchor="middle" x="150" y="430" >0</text><line  class="poloto_axis_lines" stroke="black" x1="276.26262626262627" x2="276.26262626262627" y1="400" y2="405" /><text  class="poloto_tick_labels poloto_text" dominant-baseline="start" text-anchor="middle" x="276.26262626262627" y="430" >5000</text><line  class="poloto_axis_lines" stroke="black" x1="402.52525252525254" x2="402.52525252525254" y1="400" y2="405" /><text  class="poloto_tick_labels poloto_text" dominant-baseline="start" text-anchor="middle" x="402.52525252525254" y="430" >10000</text><line  class="poloto_axis_lines" stroke="black" x1="528.7878787878788" x2="528.7878787878788" y1="400" y2="405" /><text  class="poloto_tick_labels poloto_text" dominant-baseline="start" text-anchor="middle" x="528.7878787878788" y="430" >15000</text><text  class="poloto_tick_labels poloto_text" dominant-baseline="middle" text-anchor="start" x="150" y="70" ></text><line  class="poloto_axis_lines" stroke="black" x1="150" x2="144" y1="400" y2="400" /><text  class="poloto_tick_labels poloto_text" dominant-baseline="middle" text-anchor="end" x="135" y="400" >0e0</text><line  class="poloto_axis_lines" stroke="black" x1="150" x2="144" y1="338.55604241926983" y2="338.55604241926983" /><text  class="poloto_tick_labels poloto_text" dominant-baseline="middle" text-anchor="end" x="135" y="338.55604241926983" >0.0005</text><line  class="poloto_axis_lines" stroke="black" x1="150" x2="144" y1="277.1120848385396" y2="277.1120848385396" /><text  class="poloto_tick_labels poloto_text" dominant-baseline="middle" text-anchor="end" x="135" y="277.1120848385396" >0.0010</text><line  class="poloto_axis_lines" stroke="black" x1="150" x2="144" y1="215.66812725780937" y2="215.66812725780937" /><text  class="poloto_tick_labels poloto_text" dominant-baseline="middle" text-anchor="end" x="135" y="215.66812725780937" >0.0015</text><line  class="poloto_axis_lines" stroke="black" x1="150" x2="144" y1="154.2241696770792" y2="154.2241696770792" /><text  class="poloto_tick_labels poloto_text" dominant-baseline="middle" text-anchor="end" x="135" y="154.2241696770792" >0.0020</text><path  stroke="black" fill="none" class="poloto_axis_lines" style="stroke-dasharray:12.626262626262626;stroke-dashoffset:-0;" d=" M 150 400 L 650 400" /><path  stroke="black" fill="none" class="poloto_axis_lines" style="stroke-dasharray:6.14439575807302;stroke-dashoffset:-0;" d=" M 150 400 L 150 100" /></svg>
<svg class="poloto" width="800" height="500" viewBox="0 0 800 500" xmlns="http://www.w3.org/2000/svg"><circle  r="1e5" class="poloto_background" /><text  class="poloto_text poloto_legend_text" x="675" y="100" >brocc_constr</text><line  class="poloto_line poloto_legend_icon poloto0stroke poloto0legend" stroke="black" x1="680" x2="730" y1="81.25" y2="81.25" /><path  class="poloto_line poloto0stroke" fill="none" stroke="black" d=" M 150.00 400.00 L 155.05 399.86 L 160.10 399.62 L 165.15 399.26 L 170.20 398.96 L 175.25 398.57 L 180.30 398.22 L 185.35 397.86 L 190.40 397.48 L 195.45 396.87 L 200.51 396.63 L 205.56 395.99 L 210.61 395.76 L 215.66 395.31 L 220.71 394.91 L 225.76 394.72 L 230.81 394.28 L 235.86 393.58 L 240.91 392.73 L 245.96 392.39 L 251.01 392.17 L 256.06 391.42 L 261.11 390.95 L 266.16 390.73 L 271.21 389.89 L 276.26 389.72 L 281.31 389.17 L 286.36 388.70 L 291.41 388.03 L 296.46 387.98 L 301.52 387.25 L 306.57 386.96 L 311.62 386.39 L 316.67 386.05 L 321.72 385.71 L 326.77 383.70 L 331.82 383.80 L 336.87 382.83 L 341.92 382.19 L 346.97 382.43 L 352.02 381.40 L 357.07 380.81 L 362.12 380.54 L 367.17 380.00 L 372.22 379.37 L 377.27 378.90 L 382.32 378.56 L 387.37 378.05 L 392.42 377.47 L 397.47 377.18 L 402.53 376.59 L 407.58 375.82 L 412.63 375.36 L 417.68 374.57 L 422.73 374.67 L 427.78 373.82 L 432.83 373.90 L 437.88 372.95 L 442.93 372.00 L 447.98 371.11 L 453.03 371.56 L 458.08 369.78 L 463.13 370.03 L 468.18 369.04 L 473.23 369.15 L 478.28 367.53 L 483.33 368.16 L 488.38 367.88 L 493.43 365.93 L 498.48 364.90 L 503.54 364.61 L 508.59 363.66 L 513.64 363.20 L 518.69 362.31 L 523.74 361.14 L 528.79 361.24 L 533.84 360.60 L 538.89 359.93 L 543.94 359.84 L 548.99 358.83 L 554.04 358.32 L 559.09 356.85 L 564.14 356.93 L 569.19 356.45 L 574.24 355.80 L 579.29 354.66 L 584.34 353.82 L 589.39 353.75 L 594.44 353.56 L 599.49 353.04 L 604.55 352.79 L 609.60 351.51 L 614.65 351.01 L 619.70 350.84 L 624.75 350.96 L 629.80 349.50 L 634.85 349.30 L 639.90 349.36 L 644.95 348.14 L 650.00 347.55" /><text  class="poloto_text poloto_legend_text" x="675" y="150" >brocc_query</text><line  class="poloto_line poloto_legend_icon poloto1stroke poloto1legend" stroke="black" x1="680" x2="730" y1="131.25" y2="131.25" /><path  class="poloto_line poloto1stroke" fill="none" stroke="black" d=" M 150.00 400.00 L 155.05 399.52 L 160.10 398.70 L 165.15 398.11 L 170.20 397.23 L 175.25 396.31 L 180.30 395.30 L 185.35 394.26 L 190.40 393.19 L 195.45 393.24 L 200.51 392.46 L 205.56 391.32 L 210.61 390.52 L 215.66 389.43 L 220.71 388.52 L 225.76 387.69 L 230.81 386.57 L 235.86 385.26 L 240.91 384.06 L 245.96 383.13 L 251.01 382.28 L 256.06 380.78 L 261.11 379.58 L 266.16 378.74 L 271.21 377.20 L 276.26 376.28 L 281.31 375.00 L 286.36 373.82 L 291.41 372.47 L 296.46 371.52 L 301.52 370.01 L 306.57 368.80 L 311.62 367.61 L 316.67 366.42 L 321.72 365.30 L 326.77 368.59 L 331.82 368.16 L 336.87 366.63 L 341.92 365.45 L 346.97 365.17 L 352.02 363.56 L 357.07 362.37 L 362.12 361.45 L 367.17 360.41 L 372.22 359.21 L 377.27 358.08 L 382.32 357.20 L 387.37 356.08 L 392.42 354.95 L 397.47 354.09 L 402.53 352.84 L 407.58 351.49 L 412.63 350.42 L 417.68 348.96 L 422.73 348.50 L 427.78 347.09 L 432.83 346.50 L 437.88 344.79 L 442.93 343.19 L 447.98 341.59 L 453.03 341.38 L 458.08 339.01 L 463.13 338.56 L 468.18 336.92 L 473.23 336.43 L 478.28 334.13 L 483.33 334.25 L 488.38 333.15 L 493.43 330.49 L 498.48 330.31 L 503.54 329.18 L 508.59 327.64 L 513.64 326.57 L 518.69 325.12 L 523.74 323.20 L 528.79 322.77 L 533.84 321.37 L 538.89 320.03 L 543.94 319.24 L 548.99 317.44 L 554.04 316.17 L 559.09 313.98 L 564.14 313.42 L 569.19 312.33 L 574.24 310.90 L 579.29 309.24 L 584.34 307.54 L 589.39 306.81 L 594.44 305.85 L 599.49 304.74 L 604.55 303.68 L 609.60 301.62 L 614.65 300.40 L 619.70 299.28 L 624.75 298.76 L 629.80 296.59 L 634.85 295.57 L 639.90 294.98 L 644.95 293.07 L 650.00 291.64" /><text  class="poloto_text poloto_legend_text" x="675" y="200" >nosort_constr</text><line  class="poloto_line poloto_legend_icon poloto2stroke poloto2legend" stroke="black" x1="680" x2="730" y1="181.25" y2="181.25" /><path  class="poloto_line poloto2stroke" fill="none" stroke="black" d=" M 150.00 400.00 L 155.05 399.97 L 160.10 399.81 L 165.15 399.50 L 170.20 399.34 L 175.25 398.92 L 180.30 398.71 L 185.35 398.44 L 190.40 398.23 L 195.45 397.50 L 200.51 397.37 L 205.56 396.86 L 210.61 396.73 L 215.66 396.38 L 220.71 396.11 L 225.76 396.02 L 230.81 395.69 L 235.86 395.17 L 240.91 394.05 L 245.96 393.74 L 251.01 393.60 L 256.06 392.98 L 261.11 392.64 L 266.16 392.51 L 271.21 391.76 L 276.26 391.78 L 281.31 391.30 L 286.36 390.96 L 291.41 390.32 L 296.46 390.43 L 301.52 389.80 L 306.57 389.75 L 311.62 389.26 L 316.67 388.97 L 321.72 388.77 L 326.77 386.16 L 331.82 386.38 L 336.87 385.49 L 341.92 384.95 L 346.97 385.32 L 352.02 384.32 L 357.07 383.84 L 362.12 383.71 L 367.17 383.26 L 372.22 382.79 L 377.27 382.35 L 382.32 382.14 L 387.37 381.76 L 392.42 381.19 L 397.47 381.10 L 402.53 380.64 L 407.58 379.94 L 412.63 379.64 L 417.68 378.94 L 422.73 379.16 L 427.78 378.39 L 432.83 378.64 L 437.88 377.76 L 442.93 376.98 L 447.98 376.15 L 453.03 376.82 L 458.08 375.12 L 463.13 375.49 L 468.18 374.57 L 473.23 374.95 L 478.28 373.36 L 483.33 374.13 L 488.38 373.95 L 493.43 372.18 L 498.48 369.61 L 503.54 369.45 L 508.59 368.62 L 513.64 368.22 L 518.69 367.44 L 523.74 366.37 L 528.79 366.66 L 533.84 366.00 L 538.89 365.56 L 543.94 365.59 L 548.99 364.69 L 554.04 364.18 L 559.09 362.83 L 564.14 363.09 L 569.19 362.80 L 574.24 362.08 L 579.29 361.02 L 584.34 360.37 L 589.39 360.31 L 594.44 360.25 L 599.49 359.90 L 604.55 359.74 L 609.60 358.59 L 614.65 358.16 L 619.70 358.05 L 624.75 358.34 L 629.80 356.94 L 634.85 356.74 L 639.90 357.09 L 644.95 355.88 L 650.00 355.49" /><text  class="poloto_text poloto_legend_text" x="675" y="250" >nosort_query</text><line  class="poloto_line poloto_legend_icon poloto3stroke poloto3legend" stroke="black" x1="680" x2="730" y1="231.25" y2="231.25" /><path  class="poloto_line poloto3stroke" fill="none" stroke="black" d=" M 150.00 400.00 L 155.05 398.99 L 160.10 397.31 L 165.15 395.78 L 170.20 393.27 L 175.25 392.41 L 180.30 389.80 L 185.35 386.83 L 190.40 383.66 L 195.45 384.67 L 200.51 381.95 L 205.56 379.00 L 210.61 376.37 L 215.66 372.74 L 220.71 369.46 L 225.76 366.05 L 230.81 362.24 L 235.86 358.20 L 240.91 364.61 L 245.96 361.27 L 251.01 358.41 L 256.06 354.89 L 261.11 351.93 L 266.16 348.72 L 271.21 345.04 L 276.26 341.60 L 281.31 337.68 L 286.36 334.11 L 291.41 330.16 L 296.46 325.54 L 301.52 321.55 L 306.57 317.73 L 311.62 313.94 L 316.67 309.62 L 321.72 304.96 L 326.77 319.03 L 331.82 317.16 L 336.87 313.99 L 341.92 309.36 L 346.97 306.83 L 352.02 302.11 L 357.07 297.96 L 362.12 294.34 L 367.17 292.11 L 372.22 288.00 L 377.27 282.78 L 382.32 279.96 L 387.37 276.42 L 392.42 271.45 L 397.47 268.04 L 402.53 263.70 L 407.58 259.42 L 412.63 255.37 L 417.68 250.12 L 422.73 247.55 L 427.78 242.26 L 432.83 238.95 L 437.88 234.95 L 442.93 228.73 L 447.98 222.94 L 453.03 220.23 L 458.08 215.13 L 463.13 209.79 L 468.18 204.48 L 473.23 202.41 L 478.28 196.13 L 483.33 192.81 L 488.38 187.92 L 493.43 179.52 L 498.48 224.74 L 503.54 220.78 L 508.59 215.89 L 513.64 212.75 L 518.69 209.83 L 523.74 205.26 L 528.79 202.29 L 533.84 198.01 L 538.89 194.95 L 543.94 190.53 L 548.99 186.10 L 554.04 181.52 L 559.09 176.62 L 564.14 172.84 L 569.19 169.91 L 574.24 164.57 L 579.29 159.60 L 584.34 157.16 L 589.39 152.15 L 594.44 146.57 L 599.49 144.97 L 604.55 140.69 L 609.60 134.55 L 614.65 129.54 L 619.70 126.08 L 624.75 122.44 L 629.80 116.98 L 634.85 113.89 L 639.90 109.56 L 644.95 104.11 L 650.00 100.00" /><text  class="poloto_labels poloto_text poloto_title" x="400" y="37.5" >Complexity of construction vs query with abspiral(x,2.1)</text><text  class="poloto_labels poloto_text poloto_xname" x="400" y="481.25" >Number of Elements</text><text  class="poloto_labels poloto_text poloto_yname" transform="rotate(-90,37.5,250)" x="37.5" y="250" >Number of Comparisons</text><text  class="poloto_tick_labels poloto_text" dominant-baseline="middle" text-anchor="start" x="440.00000000000006" y="70" ></text><line  class="poloto_axis_lines" stroke="black" x1="150" x2="150" y1="400" y2="405" /><text  class="poloto_tick_labels poloto_text" dominant-baseline="start" text-anchor="middle" x="150" y="430" >0</text><line  class="poloto_axis_lines" stroke="black" x1="234.17508417508418" x2="234.17508417508418" y1="400" y2="405" /><text  class="poloto_tick_labels poloto_text" dominant-baseline="start" text-anchor="middle" x="234.17508417508418" y="430" >1000</text><line  class="poloto_axis_lines" stroke="black" x1="318.35016835016836" x2="318.35016835016836" y1="400" y2="405" /><text  class="poloto_tick_labels poloto_text" dominant-baseline="start" text-anchor="middle" x="318.35016835016836" y="430" >2000</text><line  class="poloto_axis_lines" stroke="black" x1="402.52525252525254" x2="402.52525252525254" y1="400" y2="405" /><text  class="poloto_tick_labels poloto_text" dominant-baseline="start" text-anchor="middle" x="402.52525252525254" y="430" >3000</text><line  class="poloto_axis_lines" stroke="black" x1="486.7003367003367" x2="486.7003367003367" y1="400" y2="405" /><text  class="poloto_tick_labels poloto_text" dominant-baseline="start" text-anchor="middle" x="486.7003367003367" y="430" >4000</text><line  class="poloto_axis_lines" stroke="black" x1="570.8754208754209" x2="570.8754208754209" y1="400" y2="405" /><text  class="poloto_tick_labels poloto_text" dominant-baseline="start" text-anchor="middle" x="570.8754208754209" y="430" >5000</text><text  class="poloto_tick_labels poloto_text" dominant-baseline="middle" text-anchor="start" x="150" y="70" ></text><line  class="poloto_axis_lines" stroke="black" x1="150" x2="144" y1="400" y2="400" /><text  class="poloto_tick_labels poloto_text" dominant-baseline="middle" text-anchor="end" x="135" y="400" >0</text><line  class="poloto_axis_lines" stroke="black" x1="150" x2="144" y1="345.4431877181704" y2="345.4431877181704" /><text  class="poloto_tick_labels poloto_text" dominant-baseline="middle" text-anchor="end" x="135" y="345.4431877181704" >2e5</text><line  class="poloto_axis_lines" stroke="black" x1="150" x2="144" y1="290.8863754363408" y2="290.8863754363408" /><text  class="poloto_tick_labels poloto_text" dominant-baseline="middle" text-anchor="end" x="135" y="290.8863754363408" >4e5</text><line  class="poloto_axis_lines" stroke="black" x1="150" x2="144" y1="236.32956315451122" y2="236.32956315451122" /><text  class="poloto_tick_labels poloto_text" dominant-baseline="middle" text-anchor="end" x="135" y="236.32956315451122" >6e5</text><line  class="poloto_axis_lines" stroke="black" x1="150" x2="144" y1="181.77275087268163" y2="181.77275087268163" /><text  class="poloto_tick_labels poloto_text" dominant-baseline="middle" text-anchor="end" x="135" y="181.77275087268163" >8e5</text><line  class="poloto_axis_lines" stroke="black" x1="150" x2="144" y1="127.21593859085209" y2="127.21593859085209" /><text  class="poloto_tick_labels poloto_text" dominant-baseline="middle" text-anchor="end" x="135" y="127.21593859085209" >1e6</text><path  stroke="black" fill="none" class="poloto_axis_lines" style="stroke-dasharray:8.417508417508419;stroke-dashoffset:-0;" d=" M 150 400 L 650 400" /><path  stroke="black" fill="none" class="poloto_axis_lines" style="stroke-dasharray:6.819601535228698;stroke-dashoffset:-0;" d=" M 150 400 L 150 99.99999999999994" /></svg>
<svg class="poloto" width="800" height="500" viewBox="0 0 800 500" xmlns="http://www.w3.org/2000/svg"><circle  r="1e5" class="poloto_background" /><text  class="poloto_text poloto_legend_text" x="675" y="100" >brocc_constr</text><line  class="poloto_line poloto_legend_icon poloto0stroke poloto0legend" stroke="black" x1="680" x2="730" y1="81.25" y2="81.25" /><path  class="poloto_line poloto0stroke" fill="none" stroke="black" d=" M 150.00 360.38 L 155.05 360.45 L 160.10 360.13 L 165.15 360.70 L 170.20 360.59 L 175.25 360.52 L 180.30 360.66 L 185.35 360.42 L 190.40 360.54 L 195.45 360.70 L 200.51 360.70 L 205.56 360.66 L 210.61 360.64 L 215.66 360.56 L 220.71 360.51 L 225.76 360.21 L 230.81 360.17 L 235.86 360.13 L 240.91 360.33 L 245.96 359.99 L 251.01 360.25 L 256.06 359.91 L 261.11 360.19 L 266.16 359.97 L 271.21 360.24 L 276.26 360.37 L 281.31 360.64 L 286.36 360.65 L 291.41 360.46 L 296.46 360.45 L 301.52 360.15 L 306.57 360.06 L 311.62 360.23 L 316.67 360.11 L 321.72 360.23 L 326.77 360.40 L 331.82 360.43 L 336.87 360.06 L 341.92 360.33 L 346.97 360.28 L 352.02 360.61 L 357.07 360.49 L 362.12 360.38 L 367.17 360.36 L 372.22 360.60 L 377.27 360.23 L 382.32 360.36 L 387.37 360.09 L 392.42 360.48 L 397.47 360.38 L 402.53 360.14 L 407.58 360.49 L 412.63 359.81 L 417.68 359.77 L 422.73 360.27 L 427.78 360.17 L 432.83 360.17 L 437.88 360.31 L 442.93 360.20 L 447.98 360.21 L 453.03 360.14 L 458.08 359.91 L 463.13 359.88 L 468.18 359.72 L 473.23 359.91 L 478.28 359.78 L 483.33 360.21 L 488.38 359.50 L 493.43 359.62 L 498.48 359.84 L 503.54 360.08 L 508.59 360.04 L 513.64 359.75 L 518.69 360.09 L 523.74 359.91 L 528.79 359.84 L 533.84 359.95 L 538.89 360.16 L 543.94 360.27 L 548.99 360.28 L 554.04 360.16 L 559.09 360.13 L 564.14 360.07 L 569.19 359.44 L 574.24 359.41 L 579.29 359.51 L 584.34 359.40 L 589.39 359.37 L 594.44 359.89 L 599.49 359.72 L 604.55 359.80 L 609.60 359.79 L 614.65 360.08 L 619.70 359.59 L 624.75 359.70 L 629.80 359.90 L 634.85 359.83 L 639.90 359.69 L 644.95 359.78 L 650.00 359.70" /><text  class="poloto_text poloto_legend_text" x="675" y="150" >brocc_query</text><line  class="poloto_line poloto_legend_icon poloto1stroke poloto1legend" stroke="black" x1="680" x2="730" y1="131.25" y2="131.25" /><path  class="poloto_line poloto1stroke" fill="none" stroke="black" d=" M 150.00 321.03 L 155.05 321.27 L 160.10 321.17 L 165.15 321.89 L 170.20 321.97 L 175.25 322.05 L 180.30 322.34 L 185.35 322.26 L 190.40 322.56 L 195.45 322.89 L 200.51 323.08 L 205.56 323.18 L 210.61 323.34 L 215.66 323.41 L 220.71 323.50 L 225.76 323.37 L 230.81 323.49 L 235.86 323.58 L 240.91 323.93 L 245.96 323.73 L 251.01 324.12 L 256.06 323.91 L 261.11 324.32 L 266.16 324.23 L 271.21 324.66 L 276.26 324.94 L 281.31 325.36 L 286.36 325.50 L 291.41 325.43 L 296.46 325.56 L 301.52 325.38 L 306.57 325.42 L 311.62 325.69 L 316.67 325.71 L 321.72 325.96 L 326.77 326.27 L 331.82 326.41 L 336.87 326.17 L 341.92 326.56 L 346.97 326.63 L 352.02 327.09 L 357.07 327.07 L 362.12 327.09 L 367.17 327.19 L 372.22 327.53 L 377.27 327.27 L 382.32 327.50 L 387.37 327.35 L 392.42 327.85 L 397.47 327.87 L 402.53 327.74 L 407.58 328.20 L 412.63 327.65 L 417.68 327.70 L 422.73 328.30 L 427.78 328.30 L 432.83 328.41 L 437.88 328.66 L 442.93 328.65 L 447.98 328.76 L 453.03 328.80 L 458.08 328.65 L 463.13 328.71 L 468.18 328.65 L 473.23 328.94 L 478.28 328.90 L 483.33 329.41 L 488.38 328.80 L 493.43 329.02 L 498.48 329.33 L 503.54 329.66 L 508.59 329.72 L 513.64 329.54 L 518.69 329.97 L 523.74 329.89 L 528.79 329.92 L 533.84 330.11 L 538.89 330.43 L 543.94 330.63 L 548.99 330.72 L 554.04 330.69 L 559.09 330.76 L 564.14 330.77 L 569.19 330.25 L 574.24 330.29 L 579.29 330.49 L 584.34 330.46 L 589.39 330.51 L 594.44 331.11 L 599.49 331.02 L 604.55 331.18 L 609.60 331.26 L 614.65 331.63 L 619.70 331.24 L 624.75 331.44 L 629.80 331.76 L 634.85 331.77 L 639.90 331.72 L 644.95 331.90 L 650.00 331.90" /><text  class="poloto_text poloto_legend_text" x="675" y="200" >nosort_constr</text><line  class="poloto_line poloto_legend_icon poloto2stroke poloto2legend" stroke="black" x1="680" x2="730" y1="181.25" y2="181.25" /><path  class="poloto_line poloto2stroke" fill="none" stroke="black" d=" M 150.00 364.69 L 155.05 364.77 L 160.10 364.43 L 165.15 365.00 L 170.20 364.90 L 175.25 364.84 L 180.30 365.00 L 185.35 364.74 L 190.40 364.88 L 195.45 365.03 L 200.51 364.99 L 205.56 364.99 L 210.61 364.96 L 215.66 364.88 L 220.71 364.82 L 225.76 364.54 L 230.81 364.50 L 235.86 364.46 L 240.91 364.65 L 245.96 364.34 L 251.01 364.58 L 256.06 364.24 L 261.11 364.53 L 266.16 364.28 L 271.21 364.57 L 276.26 364.68 L 281.31 364.96 L 286.36 364.94 L 291.41 364.76 L 296.46 364.73 L 301.52 364.44 L 306.57 364.35 L 311.62 364.53 L 316.67 364.44 L 321.72 364.54 L 326.77 364.70 L 331.82 364.74 L 336.87 364.40 L 341.92 364.65 L 346.97 364.60 L 352.02 364.92 L 357.07 364.80 L 362.12 364.68 L 367.17 364.65 L 372.22 364.91 L 377.27 364.57 L 382.32 364.68 L 387.37 364.37 L 392.42 364.78 L 397.47 364.72 L 402.53 364.44 L 407.58 364.78 L 412.63 364.11 L 417.68 364.05 L 422.73 364.52 L 427.78 364.44 L 432.83 364.45 L 437.88 364.60 L 442.93 364.50 L 447.98 364.51 L 453.03 364.42 L 458.08 364.19 L 463.13 364.17 L 468.18 364.02 L 473.23 364.19 L 478.28 364.08 L 483.33 364.51 L 488.38 363.78 L 493.43 363.90 L 498.48 364.13 L 503.54 364.38 L 508.59 364.32 L 513.64 364.04 L 518.69 364.38 L 523.74 364.17 L 528.79 364.12 L 533.84 364.22 L 538.89 364.43 L 543.94 364.53 L 548.99 364.55 L 554.04 364.42 L 559.09 364.38 L 564.14 364.32 L 569.19 363.71 L 574.24 363.69 L 579.29 363.78 L 584.34 363.67 L 589.39 363.64 L 594.44 364.19 L 599.49 364.00 L 604.55 364.07 L 609.60 364.05 L 614.65 364.35 L 619.70 363.84 L 624.75 363.96 L 629.80 364.14 L 634.85 364.07 L 639.90 363.95 L 644.95 364.02 L 650.00 363.98" /><text  class="poloto_text poloto_legend_text" x="675" y="250" >nosort_query</text><line  class="poloto_line poloto_legend_icon poloto3stroke poloto3legend" stroke="black" x1="680" x2="730" y1="231.25" y2="231.25" /><path  class="poloto_line poloto3stroke" fill="none" stroke="black" d=" M 150.00 100.00 L 155.05 101.06 L 160.10 102.28 L 165.15 103.73 L 170.20 104.43 L 175.25 105.23 L 180.30 106.13 L 185.35 106.72 L 190.40 108.12 L 195.45 110.11 L 200.51 110.94 L 205.56 111.72 L 210.61 113.26 L 215.66 114.14 L 220.71 114.84 L 225.76 115.58 L 230.81 116.47 L 235.86 117.10 L 240.91 118.07 L 245.96 118.70 L 251.01 119.85 L 256.06 120.80 L 261.11 121.84 L 266.16 122.35 L 271.21 124.21 L 276.26 125.43 L 281.31 126.76 L 286.36 127.60 L 291.41 128.28 L 296.46 129.03 L 301.52 129.49 L 306.57 129.91 L 311.62 130.88 L 316.67 131.19 L 321.72 132.22 L 326.77 133.32 L 331.82 134.08 L 336.87 134.50 L 341.92 135.59 L 346.97 135.95 L 352.02 137.32 L 357.07 137.63 L 362.12 138.89 L 367.17 139.43 L 372.22 140.43 L 377.27 140.85 L 382.32 141.40 L 387.37 141.94 L 392.42 143.13 L 397.47 143.93 L 402.53 144.52 L 407.58 146.05 L 412.63 146.29 L 417.68 146.93 L 422.73 148.07 L 427.78 148.54 L 432.83 149.58 L 437.88 150.72 L 442.93 151.20 L 447.98 151.63 L 453.03 152.13 L 458.08 152.33 L 463.13 152.81 L 468.18 153.58 L 473.23 154.57 L 478.28 155.15 L 483.33 156.03 L 488.38 156.10 L 493.43 157.03 L 498.48 157.78 L 503.54 158.49 L 508.59 158.83 L 513.64 159.31 L 518.69 160.43 L 523.74 161.01 L 528.79 161.46 L 533.84 162.15 L 538.89 162.97 L 543.94 163.54 L 548.99 163.72 L 554.04 164.14 L 559.09 164.58 L 564.14 164.88 L 569.19 164.89 L 574.24 165.32 L 579.29 166.02 L 584.34 166.50 L 589.39 166.91 L 594.44 167.92 L 599.49 168.41 L 604.55 168.93 L 609.60 169.25 L 614.65 170.19 L 619.70 170.39 L 624.75 171.33 L 629.80 172.79 L 634.85 173.10 L 639.90 173.44 L 644.95 174.26 L 650.00 174.73" /><text  class="poloto_labels poloto_text poloto_title" x="400" y="37.5" >Complexity of construction vs query with abspiral(40_000,grow)</text><text  class="poloto_labels poloto_text poloto_xname" x="400" y="481.25" >Grow</text><text  class="poloto_labels poloto_text poloto_yname" transform="rotate(-90,37.5,250)" x="37.5" y="250" >Number of Comparisons</text><text  class="poloto_tick_labels poloto_text" dominant-baseline="middle" text-anchor="start" x="440.00000000000006" y="70" ></text><line  class="poloto_axis_lines" stroke="black" x1="150" x2="150" y1="400" y2="405" /><text  class="poloto_tick_labels poloto_text" dominant-baseline="start" text-anchor="middle" x="150" y="430" >1.5</text><line  class="poloto_axis_lines" stroke="black" x1="234.1750841750843" x2="234.1750841750843" y1="400" y2="405" /><text  class="poloto_tick_labels poloto_text" dominant-baseline="start" text-anchor="middle" x="234.1750841750843" y="430" >1.6</text><line  class="poloto_axis_lines" stroke="black" x1="318.35016835016836" x2="318.35016835016836" y1="400" y2="405" /><text  class="poloto_tick_labels poloto_text" dominant-baseline="start" text-anchor="middle" x="318.35016835016836" y="430" >1.7</text><line  class="poloto_axis_lines" stroke="black" x1="402.52525252525265" x2="402.52525252525265" y1="400" y2="405" /><text  class="poloto_tick_labels poloto_text" dominant-baseline="start" text-anchor="middle" x="402.52525252525265" y="430" >1.8</text><line  class="poloto_axis_lines" stroke="black" x1="486.7003367003365" x2="486.7003367003365" y1="400" y2="405" /><text  class="poloto_tick_labels poloto_text" dominant-baseline="start" text-anchor="middle" x="486.7003367003365" y="430" >1.9</text><line  class="poloto_axis_lines" stroke="black" x1="570.8754208754208" x2="570.8754208754208" y1="400" y2="405" /><text  class="poloto_tick_labels poloto_text" dominant-baseline="start" text-anchor="middle" x="570.8754208754208" y="430" >2.0</text><text  class="poloto_tick_labels poloto_text" dominant-baseline="middle" text-anchor="start" x="150" y="70" ></text><line  class="poloto_axis_lines" stroke="black" x1="150" x2="144" y1="400" y2="400" /><text  class="poloto_tick_labels poloto_text" dominant-baseline="middle" text-anchor="end" x="135" y="400" >0</text><line  class="poloto_axis_lines" stroke="black" x1="150" x2="144" y1="353.6099463986126" y2="353.6099463986126" /><text  class="poloto_tick_labels poloto_text" dominant-baseline="middle" text-anchor="end" x="135" y="353.6099463986126" >2e6</text><line  class="poloto_axis_lines" stroke="black" x1="150" x2="144" y1="307.21989279722516" y2="307.21989279722516" /><text  class="poloto_tick_labels poloto_text" dominant-baseline="middle" text-anchor="end" x="135" y="307.21989279722516" >4e6</text><line  class="poloto_axis_lines" stroke="black" x1="150" x2="144" y1="260.8298391958377" y2="260.8298391958377" /><text  class="poloto_tick_labels poloto_text" dominant-baseline="middle" text-anchor="end" x="135" y="260.8298391958377" >6e6</text><line  class="poloto_axis_lines" stroke="black" x1="150" x2="144" y1="214.43978559445026" y2="214.43978559445026" /><text  class="poloto_tick_labels poloto_text" dominant-baseline="middle" text-anchor="end" x="135" y="214.43978559445026" >8e6</text><line  class="poloto_axis_lines" stroke="black" x1="150" x2="144" y1="168.04973199306278" y2="168.04973199306278" /><text  class="poloto_tick_labels poloto_text" dominant-baseline="middle" text-anchor="end" x="135" y="168.04973199306278" >1e7</text><line  class="poloto_axis_lines" stroke="black" x1="150" x2="144" y1="121.65967839167536" y2="121.65967839167536" /><text  class="poloto_tick_labels poloto_text" dominant-baseline="middle" text-anchor="end" x="135" y="121.65967839167536" >1.2e7</text><path  stroke="black" fill="none" class="poloto_axis_lines" style="stroke-dasharray:8.417508417508413;stroke-dashoffset:-0;" d=" M 150 400 L 650.0000000000002 400" /><path  stroke="black" fill="none" class="poloto_axis_lines" style="stroke-dasharray:11.597513400346859;stroke-dashoffset:-0;" d=" M 150 400 L 150 100" /></svg>
<h3 id="collect-performance"><a class="header" href="#collect-performance">Collect Performance</a></h3>
<p>Sometimes you need to iterate over all colliding pairs multiple times even though the elements haven't moved.
You could call <code>find_colliding_pairs()</code> multiple times, but it is slow.
Broccoli provides functions to save off query results so that they can be iterated on though <code>TreeInd</code>.</p>
<p><svg class="poloto" width="800" height="500" viewBox="0 0 800 500" xmlns="http://www.w3.org/2000/svg"><circle  r="1e5" class="poloto_background" /><text  class="poloto_text poloto_legend_text" x="675" y="100" >bench</text><line  class="poloto_line poloto_legend_icon poloto0stroke poloto0legend" stroke="black" x1="680" x2="730" y1="81.25" y2="81.25" /><path  class="poloto_line poloto0stroke" fill="none" stroke="black" d=" M 150.00 399.96 L 155.05 397.15 L 160.10 394.94 L 165.15 392.90 L 170.20 386.35 L 175.25 386.54 L 180.30 383.39 L 185.35 382.40 L 190.40 379.87 L 195.45 376.89 L 200.51 372.02 L 205.56 373.06 L 210.61 370.04 L 215.66 367.25 L 220.71 364.01 L 225.76 359.51 L 230.81 359.43 L 235.86 357.75 L 240.91 354.44 L 245.96 352.28 L 251.01 348.41 L 256.06 343.05 L 261.11 346.28 L 266.16 343.14 L 271.21 334.20 L 276.26 339.30 L 281.31 336.79 L 286.36 331.09 L 291.41 329.59 L 296.46 322.24 L 301.52 323.32 L 306.57 318.55 L 311.62 317.23 L 316.67 315.06 L 321.72 308.31 L 326.77 308.60 L 331.82 294.95 L 336.87 302.05 L 341.92 296.27 L 346.97 296.25 L 352.02 297.67 L 357.07 290.80 L 362.12 282.91 L 367.17 276.99 L 372.22 292.07 L 377.27 280.67 L 382.32 277.30 L 387.37 277.15 L 392.42 268.40 L 397.47 268.25 L 402.53 277.71 L 407.58 263.34 L 412.63 259.82 L 417.68 257.49 L 422.73 257.92 L 427.78 249.79 L 432.83 249.29 L 437.88 243.93 L 442.93 255.53 L 447.98 243.45 L 453.03 254.43 L 458.08 244.69 L 463.13 232.24 L 468.18 230.42 L 473.23 227.73 L 478.28 222.79 L 483.33 234.62 L 488.38 226.64 L 493.43 218.42 L 498.48 214.46 L 503.54 208.53 L 508.59 209.01 L 513.64 215.84 L 518.69 195.71 L 523.74 194.92 L 528.79 209.92 L 533.84 189.38 L 538.89 177.84 L 543.94 194.32 L 548.99 191.31 L 554.04 171.46 L 559.09 184.14 L 564.14 178.36 L 569.19 173.59 L 574.24 194.27 L 579.29 188.42 L 584.34 162.34 L 589.39 184.99 L 594.44 172.44 L 599.49 158.66 L 604.55 155.39 L 609.60 162.17 L 614.65 171.42 L 619.70 169.90 L 624.75 168.13 L 629.80 161.78 L 634.85 135.14 L 639.90 142.70 L 644.95 139.83 L 650.00 134.59" /><text  class="poloto_text poloto_legend_text" x="675" y="150" >bench_par</text><line  class="poloto_line poloto_legend_icon poloto1stroke poloto1legend" stroke="black" x1="680" x2="730" y1="131.25" y2="131.25" /><path  class="poloto_line poloto1stroke" fill="none" stroke="black" d=" M 150.00 399.97 L 155.05 397.75 L 160.10 395.26 L 165.15 392.83 L 170.20 386.45 L 175.25 387.66 L 180.30 382.33 L 185.35 382.50 L 190.40 382.63 L 195.45 381.72 L 200.51 380.81 L 205.56 383.06 L 210.61 379.19 L 215.66 379.43 L 220.71 383.51 L 225.76 380.83 L 230.81 374.76 L 235.86 380.19 L 240.91 343.50 L 245.96 378.75 L 251.01 375.09 L 256.06 367.43 L 261.11 372.73 L 266.16 347.96 L 271.21 371.24 L 276.26 340.57 L 281.31 369.85 L 286.36 343.97 L 291.41 369.09 L 296.46 366.92 L 301.52 363.04 L 306.57 363.23 L 311.62 362.17 L 316.67 362.20 L 321.72 362.48 L 326.77 343.33 L 331.82 356.38 L 336.87 342.58 L 341.92 355.23 L 346.97 346.36 L 352.02 353.19 L 357.07 353.22 L 362.12 353.41 L 367.17 352.95 L 372.22 336.88 L 377.27 336.66 L 382.32 349.32 L 387.37 351.28 L 392.42 349.48 L 397.47 348.44 L 402.53 348.93 L 407.58 338.23 L 412.63 346.36 L 417.68 323.86 L 422.73 332.55 L 427.78 333.13 L 432.83 341.39 L 437.88 343.58 L 442.93 339.85 L 447.98 342.42 L 453.03 341.90 L 458.08 337.11 L 463.13 328.60 L 468.18 334.00 L 473.23 339.41 L 478.28 332.62 L 483.33 327.23 L 488.38 308.45 L 493.43 328.90 L 498.48 330.26 L 503.54 328.57 L 508.59 320.25 L 513.64 326.36 L 518.69 324.55 L 523.74 326.36 L 528.79 309.97 L 533.84 320.15 L 538.89 318.91 L 543.94 283.98 L 548.99 312.06 L 554.04 313.15 L 559.09 299.82 L 564.14 314.98 L 569.19 301.53 L 574.24 269.60 L 579.29 308.32 L 584.34 310.73 L 589.39 305.91 L 594.44 305.86 L 599.49 272.98 L 604.55 269.84 L 609.60 261.06 L 614.65 300.89 L 619.70 302.93 L 624.75 303.82 L 629.80 302.72 L 634.85 302.41 L 639.90 304.67 L 644.95 303.12 L 650.00 299.91" /><text  class="poloto_text poloto_legend_text" x="675" y="200" >collect</text><line  class="poloto_line poloto_legend_icon poloto2stroke poloto2legend" stroke="black" x1="680" x2="730" y1="181.25" y2="181.25" /><path  class="poloto_line poloto2stroke" fill="none" stroke="black" d=" M 150.00 399.97 L 155.05 397.07 L 160.10 394.15 L 165.15 388.79 L 170.20 386.64 L 175.25 385.19 L 180.30 382.96 L 185.35 381.21 L 190.40 375.17 L 195.45 374.14 L 200.51 371.43 L 205.56 370.97 L 210.61 366.99 L 215.66 365.20 L 220.71 362.67 L 225.76 359.66 L 230.81 356.20 L 235.86 354.98 L 240.91 348.04 L 245.96 346.64 L 251.01 343.92 L 256.06 343.65 L 261.11 339.40 L 266.16 337.03 L 271.21 337.33 L 276.26 333.59 L 281.31 328.95 L 286.36 316.55 L 291.41 323.15 L 296.46 313.21 L 301.52 312.63 L 306.57 309.03 L 311.62 299.23 L 316.67 307.46 L 321.72 303.66 L 326.77 304.01 L 331.82 297.45 L 336.87 293.05 L 341.92 290.83 L 346.97 284.30 L 352.02 284.24 L 357.07 280.96 L 362.12 283.87 L 367.17 273.15 L 372.22 272.91 L 377.27 262.69 L 382.32 256.26 L 387.37 270.83 L 392.42 238.52 L 397.47 255.84 L 402.53 256.02 L 407.58 252.22 L 412.63 248.11 L 417.68 244.53 L 422.73 240.51 L 427.78 239.18 L 432.83 236.86 L 437.88 250.49 L 442.93 222.01 L 447.98 228.12 L 453.03 224.41 L 458.08 224.75 L 463.13 239.43 L 468.18 217.67 L 473.23 214.13 L 478.28 209.84 L 483.33 217.51 L 488.38 214.69 L 493.43 194.19 L 498.48 193.31 L 503.54 189.98 L 508.59 187.51 L 513.64 186.37 L 518.69 204.76 L 523.74 189.59 L 528.79 193.25 L 533.84 187.75 L 538.89 162.29 L 543.94 164.10 L 548.99 162.65 L 554.04 172.51 L 559.09 150.28 L 564.14 155.33 L 569.19 176.03 L 574.24 171.94 L 579.29 143.25 L 584.34 135.63 L 589.39 163.48 L 594.44 149.63 L 599.49 155.10 L 604.55 147.25 L 609.60 153.83 L 614.65 150.40 L 619.70 132.16 L 624.75 142.10 L 629.80 124.56 L 634.85 100.00 L 639.90 125.44 L 644.95 119.82 L 650.00 112.59" /><text  class="poloto_text poloto_legend_text" x="675" y="250" >collect_par</text><line  class="poloto_line poloto_legend_icon poloto3stroke poloto3legend" stroke="black" x1="680" x2="730" y1="231.25" y2="231.25" /><path  class="poloto_line poloto3stroke" fill="none" stroke="black" d=" M 150.00 399.93 L 155.05 397.12 L 160.10 393.17 L 165.15 387.35 L 170.20 386.13 L 175.25 384.86 L 180.30 381.25 L 185.35 381.02 L 190.40 369.35 L 195.45 379.55 L 200.51 363.90 L 205.56 376.54 L 210.61 379.36 L 215.66 379.02 L 220.71 375.95 L 225.76 377.19 L 230.81 375.25 L 235.86 374.17 L 240.91 373.84 L 245.96 362.95 L 251.01 369.49 L 256.06 366.43 L 261.11 357.21 L 266.16 366.64 L 271.21 365.79 L 276.26 363.56 L 281.31 363.70 L 286.36 361.74 L 291.41 361.28 L 296.46 358.53 L 301.52 327.37 L 306.57 355.11 L 311.62 355.71 L 316.67 353.15 L 321.72 350.84 L 326.77 350.35 L 331.82 309.62 L 336.87 351.26 L 341.92 346.21 L 346.97 348.07 L 352.02 322.13 L 357.07 345.05 L 362.12 339.22 L 367.17 343.57 L 372.22 339.93 L 377.27 333.54 L 382.32 323.88 L 387.37 336.02 L 392.42 334.37 L 397.47 317.65 L 402.53 325.05 L 407.58 328.10 L 412.63 323.21 L 417.68 328.71 L 422.73 316.69 L 427.78 322.91 L 432.83 318.04 L 437.88 298.66 L 442.93 322.80 L 447.98 309.70 L 453.03 328.61 L 458.08 320.74 L 463.13 305.76 L 468.18 323.50 L 473.23 320.82 L 478.28 317.96 L 483.33 319.93 L 488.38 313.10 L 493.43 314.92 L 498.48 314.80 L 503.54 306.76 L 508.59 313.36 L 513.64 306.68 L 518.69 277.56 L 523.74 302.46 L 528.79 285.84 L 533.84 284.55 L 538.89 308.78 L 543.94 293.26 L 548.99 299.70 L 554.04 248.13 L 559.09 300.80 L 564.14 297.04 L 569.19 282.52 L 574.24 293.59 L 579.29 291.96 L 584.34 286.03 L 589.39 282.56 L 594.44 263.54 L 599.49 238.87 L 604.55 201.33 L 609.60 245.73 L 614.65 280.57 L 619.70 283.68 L 624.75 264.79 L 629.80 275.78 L 634.85 271.10 L 639.90 272.81 L 644.95 274.08 L 650.00 272.09" /><text  class="poloto_labels poloto_text poloto_title" x="400" y="37.5" >Bench of query vs collect with abspiral(1.5,n)</text><text  class="poloto_labels poloto_text poloto_xname" x="400" y="481.25" >Number of Elements</text><text  class="poloto_labels poloto_text poloto_yname" transform="rotate(-90,37.5,250)" x="37.5" y="250" >Time in Seconds</text><text  class="poloto_tick_labels poloto_text" dominant-baseline="middle" text-anchor="start" x="440.00000000000006" y="70" ></text><line  class="poloto_axis_lines" stroke="black" x1="150" x2="150" y1="400" y2="405" /><text  class="poloto_tick_labels poloto_text" dominant-baseline="start" text-anchor="middle" x="150" y="430" >0</text><line  class="poloto_axis_lines" stroke="black" x1="213.13131313131314" x2="213.13131313131314" y1="400" y2="405" /><text  class="poloto_tick_labels poloto_text" dominant-baseline="start" text-anchor="middle" x="213.13131313131314" y="430" >5000</text><line  class="poloto_axis_lines" stroke="black" x1="276.26262626262627" x2="276.26262626262627" y1="400" y2="405" /><text  class="poloto_tick_labels poloto_text" dominant-baseline="start" text-anchor="middle" x="276.26262626262627" y="430" >10000</text><line  class="poloto_axis_lines" stroke="black" x1="339.3939393939394" x2="339.3939393939394" y1="400" y2="405" /><text  class="poloto_tick_labels poloto_text" dominant-baseline="start" text-anchor="middle" x="339.3939393939394" y="430" >15000</text><line  class="poloto_axis_lines" stroke="black" x1="402.52525252525254" x2="402.52525252525254" y1="400" y2="405" /><text  class="poloto_tick_labels poloto_text" dominant-baseline="start" text-anchor="middle" x="402.52525252525254" y="430" >20000</text><line  class="poloto_axis_lines" stroke="black" x1="465.65656565656565" x2="465.65656565656565" y1="400" y2="405" /><text  class="poloto_tick_labels poloto_text" dominant-baseline="start" text-anchor="middle" x="465.65656565656565" y="430" >25000</text><line  class="poloto_axis_lines" stroke="black" x1="528.7878787878788" x2="528.7878787878788" y1="400" y2="405" /><text  class="poloto_tick_labels poloto_text" dominant-baseline="start" text-anchor="middle" x="528.7878787878788" y="430" >30000</text><line  class="poloto_axis_lines" stroke="black" x1="591.9191919191919" x2="591.9191919191919" y1="400" y2="405" /><text  class="poloto_tick_labels poloto_text" dominant-baseline="start" text-anchor="middle" x="591.9191919191919" y="430" >35000</text><text  class="poloto_tick_labels poloto_text" dominant-baseline="middle" text-anchor="start" x="150" y="70" ></text><line  class="poloto_axis_lines" stroke="black" x1="150" x2="144" y1="400" y2="400" /><text  class="poloto_tick_labels poloto_text" dominant-baseline="middle" text-anchor="end" x="135" y="400" >0e0</text><line  class="poloto_axis_lines" stroke="black" x1="150" x2="144" y1="346.88280878041337" y2="346.88280878041337" /><text  class="poloto_tick_labels poloto_text" dominant-baseline="middle" text-anchor="end" x="135" y="346.88280878041337" >0.001</text><line  class="poloto_axis_lines" stroke="black" x1="150" x2="144" y1="293.76561756082674" y2="293.76561756082674" /><text  class="poloto_tick_labels poloto_text" dominant-baseline="middle" text-anchor="end" x="135" y="293.76561756082674" >0.002</text><line  class="poloto_axis_lines" stroke="black" x1="150" x2="144" y1="240.64842634124005" y2="240.64842634124005" /><text  class="poloto_tick_labels poloto_text" dominant-baseline="middle" text-anchor="end" x="135" y="240.64842634124005" >0.003</text><line  class="poloto_axis_lines" stroke="black" x1="150" x2="144" y1="187.53123512165342" y2="187.53123512165342" /><text  class="poloto_tick_labels poloto_text" dominant-baseline="middle" text-anchor="end" x="135" y="187.53123512165342" >0.004</text><line  class="poloto_axis_lines" stroke="black" x1="150" x2="144" y1="134.41404390206674" y2="134.41404390206674" /><text  class="poloto_tick_labels poloto_text" dominant-baseline="middle" text-anchor="end" x="135" y="134.41404390206674" >0.005</text><path  stroke="black" fill="none" class="poloto_axis_lines" style="stroke-dasharray:6.313131313131313;stroke-dashoffset:-0;" d=" M 150 400 L 650 400" /><path  stroke="black" fill="none" class="poloto_axis_lines" style="stroke-dasharray:13.279297804896661;stroke-dashoffset:-0;" d=" M 150 400 L 150 100" /></svg></p>
<p>The above graph shows the performance of <code>collect_colliding_pairs()</code> and <code>collect_colliding_pairs_par()</code>. These functions generate lists of colliding pairs. The graph shows only the time taken to construct the lists.</p>
<p><svg class="poloto" width="800" height="500" viewBox="0 0 800 500" xmlns="http://www.w3.org/2000/svg"><circle  r="1e5" class="poloto_background" /><text  class="poloto_text poloto_legend_text" x="675" y="100" >optimal</text><line  class="poloto_line poloto_legend_icon poloto0stroke poloto0legend" stroke="black" x1="680" x2="730" y1="81.25" y2="81.25" /><path  class="poloto_line poloto0stroke" fill="none" stroke="black" d=" M 150.00 399.87 L 155.05 392.90 L 160.10 384.89 L 165.15 367.88 L 170.20 390.81 L 175.25 388.13 L 180.30 382.69 L 185.35 383.57 L 190.40 379.02 L 195.45 374.99 L 200.51 375.83 L 205.56 374.46 L 210.61 372.54 L 215.66 367.78 L 220.71 365.33 L 225.76 363.06 L 230.81 360.30 L 235.86 357.66 L 240.91 355.28 L 245.96 352.94 L 251.01 350.43 L 256.06 347.90 L 261.11 345.80 L 266.16 343.01 L 271.21 337.02 L 276.26 333.57 L 281.31 335.50 L 286.36 334.89 L 291.41 332.75 L 296.46 329.73 L 301.52 326.20 L 306.57 325.17 L 311.62 322.41 L 316.67 320.68 L 321.72 317.18 L 326.77 314.34 L 331.82 311.67 L 336.87 309.34 L 341.92 304.58 L 346.97 302.39 L 352.02 297.21 L 357.07 300.51 L 362.12 295.27 L 367.17 273.00 L 372.22 289.32 L 377.27 289.80 L 382.32 279.63 L 387.37 279.71 L 392.42 276.52 L 397.47 276.07 L 402.53 269.54 L 407.58 268.46 L 412.63 265.40 L 417.68 264.66 L 422.73 259.43 L 427.78 254.93 L 432.83 253.66 L 437.88 253.47 L 442.93 255.50 L 447.98 253.42 L 453.03 253.70 L 458.08 245.55 L 463.13 242.36 L 468.18 239.13 L 473.23 235.43 L 478.28 233.78 L 483.33 235.15 L 488.38 232.67 L 493.43 219.86 L 498.48 227.35 L 503.54 224.49 L 508.59 210.21 L 513.64 210.42 L 518.69 211.82 L 523.74 209.02 L 528.79 204.51 L 533.84 207.77 L 538.89 185.07 L 543.94 189.49 L 548.99 188.75 L 554.04 189.97 L 559.09 178.84 L 564.14 180.55 L 569.19 171.61 L 574.24 173.14 L 579.29 166.51 L 584.34 165.72 L 589.39 154.92 L 594.44 161.42 L 599.49 165.90 L 604.55 123.64 L 609.60 137.61 L 614.65 128.59 L 619.70 122.58 L 624.75 124.51 L 629.80 112.30 L 634.85 100.00 L 639.90 121.35 L 644.95 103.90 L 650.00 101.48" /><text  class="poloto_text poloto_legend_text" x="675" y="150" >optimal_par</text><line  class="poloto_line poloto_legend_icon poloto1stroke poloto1legend" stroke="black" x1="680" x2="730" y1="131.25" y2="131.25" /><path  class="poloto_line poloto1stroke" fill="none" stroke="black" d=" M 150.00 161.98 L 155.05 189.04 L 160.10 214.67 L 165.15 349.04 L 170.20 377.57 L 175.25 359.41 L 180.30 348.33 L 185.35 352.28 L 190.40 348.27 L 195.45 353.19 L 200.51 348.79 L 205.56 346.99 L 210.61 349.25 L 215.66 349.90 L 220.71 337.62 L 225.76 332.95 L 230.81 350.91 L 235.86 321.60 L 240.91 350.00 L 245.96 341.29 L 251.01 344.26 L 256.06 342.24 L 261.11 334.32 L 266.16 360.32 L 271.21 358.51 L 276.26 343.66 L 281.31 348.83 L 286.36 334.95 L 291.41 356.24 L 296.46 336.73 L 301.52 336.20 L 306.57 334.34 L 311.62 334.62 L 316.67 335.40 L 321.72 347.34 L 326.77 352.55 L 331.82 349.40 L 336.87 351.17 L 341.92 325.50 L 346.97 324.14 L 352.02 325.22 L 357.07 328.89 L 362.12 327.03 L 367.17 342.34 L 372.22 346.79 L 377.27 337.71 L 382.32 341.52 L 387.37 337.83 L 392.42 334.07 L 397.47 326.24 L 402.53 327.03 L 407.58 337.25 L 412.63 325.04 L 417.68 333.32 L 422.73 329.90 L 427.78 324.24 L 432.83 326.95 L 437.88 330.96 L 442.93 328.20 L 447.98 335.57 L 453.03 317.61 L 458.08 321.16 L 463.13 314.44 L 468.18 314.72 L 473.23 305.99 L 478.28 318.19 L 483.33 320.78 L 488.38 312.59 L 493.43 314.33 L 498.48 309.27 L 503.54 306.61 L 508.59 302.82 L 513.64 309.96 L 518.69 311.23 L 523.74 300.42 L 528.79 299.01 L 533.84 320.94 L 538.89 299.09 L 543.94 301.13 L 548.99 300.93 L 554.04 299.73 L 559.09 295.77 L 564.14 346.30 L 569.19 349.45 L 574.24 338.86 L 579.29 342.78 L 584.34 344.45 L 589.39 350.26 L 594.44 340.80 L 599.49 338.01 L 604.55 333.42 L 609.60 341.29 L 614.65 345.36 L 619.70 336.81 L 624.75 344.92 L 629.80 332.06 L 634.85 336.27 L 639.90 330.42 L 644.95 325.67 L 650.00 236.33" /><text  class="poloto_labels poloto_text poloto_title" x="400" y="37.5" >Bench of optimal with abspiral(1.5,n)</text><text  class="poloto_labels poloto_text poloto_xname" x="400" y="481.25" >Number of Elements</text><text  class="poloto_labels poloto_text poloto_yname" transform="rotate(-90,37.5,250)" x="37.5" y="250" >Time in Seconds</text><text  class="poloto_tick_labels poloto_text" dominant-baseline="middle" text-anchor="start" x="440.00000000000006" y="70" ></text><line  class="poloto_axis_lines" stroke="black" x1="150" x2="150" y1="400" y2="405" /><text  class="poloto_tick_labels poloto_text" dominant-baseline="start" text-anchor="middle" x="150" y="430" >0</text><line  class="poloto_axis_lines" stroke="black" x1="213.13131313131314" x2="213.13131313131314" y1="400" y2="405" /><text  class="poloto_tick_labels poloto_text" dominant-baseline="start" text-anchor="middle" x="213.13131313131314" y="430" >5000</text><line  class="poloto_axis_lines" stroke="black" x1="276.26262626262627" x2="276.26262626262627" y1="400" y2="405" /><text  class="poloto_tick_labels poloto_text" dominant-baseline="start" text-anchor="middle" x="276.26262626262627" y="430" >10000</text><line  class="poloto_axis_lines" stroke="black" x1="339.3939393939394" x2="339.3939393939394" y1="400" y2="405" /><text  class="poloto_tick_labels poloto_text" dominant-baseline="start" text-anchor="middle" x="339.3939393939394" y="430" >15000</text><line  class="poloto_axis_lines" stroke="black" x1="402.52525252525254" x2="402.52525252525254" y1="400" y2="405" /><text  class="poloto_tick_labels poloto_text" dominant-baseline="start" text-anchor="middle" x="402.52525252525254" y="430" >20000</text><line  class="poloto_axis_lines" stroke="black" x1="465.65656565656565" x2="465.65656565656565" y1="400" y2="405" /><text  class="poloto_tick_labels poloto_text" dominant-baseline="start" text-anchor="middle" x="465.65656565656565" y="430" >25000</text><line  class="poloto_axis_lines" stroke="black" x1="528.7878787878788" x2="528.7878787878788" y1="400" y2="405" /><text  class="poloto_tick_labels poloto_text" dominant-baseline="start" text-anchor="middle" x="528.7878787878788" y="430" >30000</text><line  class="poloto_axis_lines" stroke="black" x1="591.9191919191919" x2="591.9191919191919" y1="400" y2="405" /><text  class="poloto_tick_labels poloto_text" dominant-baseline="start" text-anchor="middle" x="591.9191919191919" y="430" >35000</text><text  class="poloto_tick_labels poloto_text" dominant-baseline="middle" text-anchor="start" x="150" y="70" ></text><line  class="poloto_axis_lines" stroke="black" x1="150" x2="144" y1="400" y2="400" /><text  class="poloto_tick_labels poloto_text" dominant-baseline="middle" text-anchor="end" x="135" y="400" >0e0</text><line  class="poloto_axis_lines" stroke="black" x1="150" x2="144" y1="326.4475129452377" y2="326.4475129452377" /><text  class="poloto_tick_labels poloto_text" dominant-baseline="middle" text-anchor="end" x="135" y="326.4475129452377" >0.0001</text><line  class="poloto_axis_lines" stroke="black" x1="150" x2="144" y1="252.89502589047544" y2="252.89502589047544" /><text  class="poloto_tick_labels poloto_text" dominant-baseline="middle" text-anchor="end" x="135" y="252.89502589047544" >0.0002</text><line  class="poloto_axis_lines" stroke="black" x1="150" x2="144" y1="179.34253883571313" y2="179.34253883571313" /><text  class="poloto_tick_labels poloto_text" dominant-baseline="middle" text-anchor="end" x="135" y="179.34253883571313" >0.0003</text><line  class="poloto_axis_lines" stroke="black" x1="150" x2="144" y1="105.79005178095088" y2="105.79005178095088" /><text  class="poloto_tick_labels poloto_text" dominant-baseline="middle" text-anchor="end" x="135" y="105.79005178095088" >0.0004</text><path  stroke="black" fill="none" class="poloto_axis_lines" style="stroke-dasharray:6.313131313131313;stroke-dashoffset:-0;" d=" M 150 400 L 650 400" /><path  stroke="black" fill="none" class="poloto_axis_lines" style="stroke-dasharray:7.355248705476228;stroke-dashoffset:-0;" d=" M 150 400 L 150 100" /></svg></p>
<p>The above graph shows the performance of iterating over the pairs collected from calling <code>collect_colliding_pairs()</code> and <code>collect_colliding_pairs_par()</code>. The parallel version returns multiple disjoint pairs that can be iterated on in parallel. Notice that it is much faster to iterate over the pre-found colliding pairs when compared to the earlier chart. The graph makes it obvious that there are gains to iterating over disjoint pairs in parallel, but keep in mind that the times we are looking at are extremely small to begin with.</p>
<p>So as you can see, you pay a small cost, for collecting the colliding pairs, but then you are able to iterate 
over them over and over again faster.</p>
<h3 id="construction-cost-vs-querying-cost"><a class="header" href="#construction-cost-vs-querying-cost">Construction Cost vs Querying Cost</a></h3>
<p>If you are simulating moving elements, it might seem slow to rebuild the tree every iteration. But from benching, most of the time querying is the cause of the slowdown. Rebuilding is always a constant load, but the load of the query can vary wildly depending on how many elements are overlapping.</p>
<p>We don't want to speed up construction but produce a worse partitioning as a result of that. That is because that would slow down querying and that is what can dominate easily. Instead we can focus on speeding up the construction of an optimal partitioning. This can be done via parallelism. Sorting the aabbs that sit on dividing lines may seem slow, but we can get this for 'free' essentially because it can be done after we have already split up the children nodes. So we can finish sorting a node while the children are being worked on. Rebuilding the first level of the tree does take some time, but it is still just a fraction of the entire building algorithm in some crucial cases, provided that it was able to partition almost all the aabbs into two planes. </p>
<p>Additionally, we have been assuming that once we build the tree, we are just finding all the colliding pairs of the elements. In reality, there might be many different queries we want to do on the same tree. So this is another reason we want the tree to be built to make querying as fast as possible, because we don't know how many queries the user might want to do on it. In addition to finding all colliding pairs, its quite reasonable the user might want to do some k_nearest querying, some rectangle area querying, or some raycasting.</p>
<h3 id="inserting-elements-after-construction"><a class="header" href="#inserting-elements-after-construction">Inserting elements after construction</a></h3>
<p>broccoli does not support inserting elements after construction. If you want to add more elements,
you have to rebuild the tree. However, broccoli provides a <code>intersect_with()</code> function that lets you
find collisions between two groups. This way you can have one group of static objects and another group of dynamic objects, and update the static objects less frequently. In a dynamic
particle system for example, most of the time, enough particles move about in one step to justify
recreating the whole tree. </p>
<h3 id="exploiting-temporal-locality-with-loose-bounding-boxes"><a class="header" href="#exploiting-temporal-locality-with-loose-bounding-boxes">Exploiting Temporal Locality (with loose bounding boxes)</a></h3>
<p>One strategy to exploit temporal locality is by inserting looser bounding boxes into the tree and caching the results of a query for longer than one step. The upside to this is that you only have to build and query the tree every couple of iterations. There are a number of downsides, though:</p>
<ul>
<li>
<p>Your system performance now depends on the speed of the aabbs. The faster your aabbs move, the bigger their loose bounding boxes, the slower the querying becomes. This isn't a big deal considering the amount that a bot moves between two frames is expected to be extremely small. But still, there are some corner cases where performance would deteriorate. For example, if every bot was going so fast it would just from one end of you screen to the other between world steps. So you may also need to bound the velocity of your aabbs to a small value.</p>
</li>
<li>
<p>You have to implement all the useful geometry tree functions all over again, or you can only use the useful geometry functions at the key world steps where the tree actually is constructed. For example, if you want to query a rectangle area, the tree provides a nice function to do this, but you only have the tree every couple of iterations. The result is that you have to somehow implement a way to query all the aabbs in the rectangle area using your cached lists of colliding aabbs, or simply only query on the world steps in which you do have the built tree. Those queries will also be slower since you are working on a tree with loose boxes.</p>
</li>
<li>
<p>The maximum load on a world step is greater. Sure amortized, this caching system may save computation, but the times you do construct and query the tree, you are doing so with loose bounding boxes. On top of that, while querying, you also have to build up a separate data structure that caches the colliding pairs you find. </p>
</li>
<li>
<p>The api of the broccoli is flexible enough that you can implement loose bounding box + caching on top of it (without sacrificing parallelism) if desired.</p>
</li>
</ul>
<p>So in short, this system doesn't take advantage of temporal locality, but the user can still take advantage of it by inserting loose bounding boxes and then querying less frequently to amortize the cost. </p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="ch1-broccoli-vs-other.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="ch3-level-analysis.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="ch1-broccoli-vs-other.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="ch3-level-analysis.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <!-- Livereload script (if served using the cli tool) -->
        <script type="text/javascript">
            var socket = new WebSocket("ws://localhost:3001/__livereload");
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload();
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>



        <script type="text/javascript">
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->


    </body>
</html>
